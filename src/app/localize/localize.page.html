<!-- src/app/localize/localize.page.html -->

<ion-header>
  <ion-toolbar>
    <ion-title>Wi-Fi Localization</ion-title>
    <!-- <ion-buttons slot="end">
      <ion-button (click)="locate()">Locate Me</ion-button>
    </ion-buttons> -->
  </ion-toolbar>
</ion-header>

<ion-content>
  <!-- The fullâ€screen Leaflet container: -->
  <!-- <div id="map" style="height: 100%; width: 100%;"></div> -->


  <!-- Full-width buttons at top of content -->
  <ion-grid class="ion-padding">
    <ion-row>
      <ion-col size="6">
        <ion-button expand="block" (click)="locate()">
          Locate Me
        </ion-button>
      </ion-col>
      <ion-col size="6">
        <ion-button id="open-coords" expand="block">
          Go To X/Y
        </ion-button>
      </ion-col>
    </ion-row>
  </ion-grid>

  <!-- Sheet modal for entering target X,Y -->
  <ion-modal
    #coordsModal
    trigger="open-coords"
    [backdropDismiss]="false"
    [initialBreakpoint]="0.25"
    [breakpoints]="[0, 0.25, 0.5, 0.75]"
  >
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>Enter Target Coordinates</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="coordsModal.dismiss()">Close</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>

      <ion-content class="ion-padding">
        <form (ngSubmit)="goToCoords(); coordsModal.dismiss()" novalidate>
          <ion-item>
            <ion-label position="stacked">X (meters)</ion-label>
            <ion-input
              type="number"
              [(ngModel)]="targetX"
              name="targetX"
              required
            ></ion-input>
          </ion-item>

          <ion-item class="ion-margin-top">
            <ion-label position="stacked">Y (meters)</ion-label>
            <ion-input
              type="number"
              [(ngModel)]="targetY"
              name="targetY"
              required
            ></ion-input>
          </ion-item>

          <ion-button
            expand="block"
            type="submit"
            [disabled]="targetX === null || targetY === null"
            class="ion-margin-top"
          >
            Go
          </ion-button>
        </form>
      </ion-content>
    </ng-template>
  </ion-modal>

  <!-- Leaflet map: fills remaining content area -->
  <div id="map" style="height: calc(100% - 56px); width: 100%"></div>
</ion-content>

