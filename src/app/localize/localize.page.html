<!-- localize.page.html -->
<ion-header>
  <ion-toolbar>
    <ion-title>Wi-Fi Localization</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <!-- Outer wrapper: holds a fixed‐height box with overflow hidden -->
  <div #mapWrapper class="map-wrapper">
    <!-- This inner div is the Panzoom “pan+zoom” root. -->
    <div #panContainer class="pan-container">
      <img
        #floorImg
        src="assets/U1F_floorplan_with_grid.png"
        alt="Floor Plan with Grid"
        class="floorplan-image"
        (load)="onImageLoad()"
      />

      <!-- Red “marker” dot, positioned absolutely within panContainer -->
      <div
        *ngIf="markerPx"
        class="marker"
        [ngStyle]="{
          left: markerPx.x + 'px',
          top: markerPx.y + 'px'
        }"
      ></div>
    </div>
  </div>

  <div class="button-row">
    <ion-button expand="block" (click)="locate()">
      Locate Me
    </ion-button>
  </div>

  <div *ngIf="position" class="info">
    <p><strong>Room:</strong> {{ position.room }}</p>
    <p>
      <strong>X (m):</strong> {{ position.x.toFixed(1) }},
      <strong>Y (m):</strong> {{ position.y.toFixed(1) }}
    </p>
  </div>
</ion-content>
